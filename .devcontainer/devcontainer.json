{
  "name": "XFCE Desktop with VNC",
  "build": {
    "dockerfile": "Dockerfile"
  },

  "postStartCommand": "bash .devcontainer/start-vnc.sh",

  "forwardPorts": [5901, 6080],

  "portsAttributes": {
    "5901": {
      "label": "VNC",
      "onAutoForward": "notify"
    },
    "6080": {
      "label": "noVNC (Web)",
      "onAutoForward": "openBrowser"
    }
  },

  "remoteUser": "vscode",

  "containerEnv": {
    "DISPLAY": ":1"
  },

  "customizations": {
    "vscode": {
      "extensions": ["ms-vscode-remote.remote-containers"],
      "settings": {
        "terminal.integrated.defaultProfile.linux": "bash"
      }
    }
  },

  "runArgs": [
    "--cap-add=SYS_PTRACE",
    "--security-opt",
    "seccomp=unconfined",
    "-e",
    "DISPLAY=${localEnv:DISPLAY}",
    "-v",
    "/tmp/.X11-unix:/tmp/.X11-unix:rw"
  ],

  "mounts": [
    "source=/var/run/docker.sock,target=/var/run/docker.sock,type=bind"
  ]
}
